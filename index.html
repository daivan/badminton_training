<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <title>Badminton Split Step</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 20px;
      background: #f5f5f5;
    }
    .hidden { display: none; }
    .big-number {
      font-size: 80px;
      font-weight: bold;
      margin: 40px 0;
    }
    button {
      padding: 10px 20px;
      font-size: 18px;
      margin-top: 20px;
      border: none;
      border-radius: 8px;
      background: #0077cc;
      color: white;
      cursor: pointer;
    }
    button:hover { background: #005fa3; }
    .corner { font-size: 40px; font-weight: bold; color: #333; }
  </style>
</head>
<body>

  <!-- Meny -->
  <div id="menu">
    <h1>Badminton Split Step</h1>

    <label for="minutes">Tr√§ningstid (minuter):</label>
    <input type="number" id="minutes" value="1" min="1" max="30"><br><br>

    <h3>V√§lj h√∂rn:</h3>
    <label><input type="checkbox" value="Fram v√§nster" checked> Fram v√§nster</label><br>
    <label><input type="checkbox" value="Fram h√∂ger" checked> Fram h√∂ger</label><br>
    <label><input type="checkbox" value="Bak v√§nster" checked> Bak v√§nster</label><br>
    <label><input type="checkbox" value="Bak h√∂ger" checked> Bak h√∂ger</label><br><br>

    <button onclick="startTraining()">Starta tr√§ning</button>
  </div>

  <!-- Tr√§ning -->
  <div id="training" class="hidden">
    <h2 id="time-left"></h2>
    <div id="display" class="big-number">3</div>
    <button onclick="stopTraining()">Avbryt</button>
  </div>

  <!-- Resultat -->
  <div id="result" class="hidden">
    <h1>Bra jobbat! üéâ</h1>
    <p id="result-text"></p>
    <button onclick="goToMenu()">Tillbaka till menyn</button>
  </div>

<script>
  let totalTime, timeLeft, countdown, corners, timerInterval;
  let isShowingCorner = false;

  function startTraining() {
    // L√§s in tid
    const minutes = parseInt(document.getElementById("minutes").value) || 1;
    totalTime = minutes * 60;
    timeLeft = totalTime;

    // L√§s in h√∂rn
    const checkboxes = document.querySelectorAll('input[type=checkbox]:checked');
    corners = Array.from(checkboxes).map(cb => cb.value);

    if (corners.length === 0) {
      alert("V√§lj minst ett h√∂rn!");
      return;
    }

    // Byt vy
    document.getElementById("menu").classList.add("hidden");
    document.getElementById("training").classList.remove("hidden");

    // Starta tr√§ningen
    countdown = 3;
    document.getElementById("display").innerText = countdown;
    updateTime();
    timerInterval = setInterval(trainingLoop, 1000);
  }

  function trainingLoop() {
    if (timeLeft <= 0) {
      clearInterval(timerInterval);
      showResult();
      return;
    }

    if (!isShowingCorner) {
      // R√§knar ner
      if (countdown > 1) {
        countdown--;
        document.getElementById("display").innerText = countdown;
      } else {
        // Visa h√∂rn
        const corner = corners[Math.floor(Math.random() * corners.length)];
        document.getElementById("display").innerText = corner;
        document.getElementById("display").className = "corner";
        isShowingCorner = true;
      }
    } else {
      // G√• tillbaka till nedr√§kning
      countdown = 3;
      document.getElementById("display").innerText = countdown;
      document.getElementById("display").className = "big-number";
      isShowingCorner = false;
    }

    timeLeft--;
    updateTime();
  }

  function updateTime() {
    document.getElementById("time-left").innerText = "Tid kvar: " + timeLeft + "s";
  }

  function stopTraining() {
    clearInterval(timerInterval);
    showResult();
  }

  function showResult() {
    document.getElementById("training").classList.add("hidden");
    document.getElementById("result").classList.remove("hidden");
    const minutes = totalTime / 60;
    document.getElementById("result-text").innerText = `Du k√∂rde i ${minutes} minut(er).`;
  }

  function goToMenu() {
    document.getElementById("result").classList.add("hidden");
    document.getElementById("menu").classList.remove("hidden");
  }
</script>

</body>
</html>
